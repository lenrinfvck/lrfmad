define("nm_banner",["jquery","widgetUI","touch"],function(n,t){function i(){this.cfg={viewX:n(window).width(),index:0,dom:n("body"),list:[]}}return i.prototype=n.extend({},new t.Widget,{init:function(t){this.cfg=n.extend({},this.cfg,t),this.render()},renderUI:function(){var t=this.cfg.dom;console.log(t,this.cfg.list);var i=this.cfg.viewX,e=this.cfg.list,s=e.length,a='<ul class="bannerUl">',r='<ul class="bannerIndex">';for(var d in e)a+='<li style="background-image: url('+e[d]+')"></li>',r+="<li></li>";a+="</ul>",r+="</ul>",t.append(a).append(r),320>i&&(i=320),n(".bannerUl li").width(i),n(".bannerUl").width(i*s).css({transform:"translate3d(0px,0,0)","webkit-transform":"translate3d(0px,0,0)"}),n(".bannerIndex li").eq(0).addClass("active")},goIndex:function(n){var t=this.cfg.dom,i=this.cfg.viewX,e=t.find(".bannerUl"),s=this.cfg.index,a=this.cfg.list.length,r=function(n,t){e.css({transform:"translate3d(-"+n+"px,0,0)","webkit-transform":"translate3d(-"+n+"px,0,0)","transition-duration":t+"s","-webkit-transition-duration":t+"s"})};if("string"==typeof n)switch(n){case"+1":s-=1,s%=a,r(-i*s,.2),e.siblings("ul").trigger("change.index",-s);break;case"-1":s+=1,s>0&&(s=-a+1),r(-i*s,.2),e.siblings("ul").trigger("change.index",-s);break;case"0":r(-i*s,.2)}this.cfg.index=s},bindUI:function(){var t=this.cfg.dom,i=t.find(".bannerUl"),e=this,s=this.cfg.viewX,a=this.cfg.list.length;t.bindTouch();var r=function(n,i){t.find(".bannerIndex li").removeClass("active").eq(i).addClass("active")},d=function(n,t){var a=e.cfg.index;n.preventDefault(),n.stopPropagation(),clearInterval(o),i.css({transform:"translate3d("+(a*s+t)+"px,0,0)","-webkit-transform":"translate3d("+(a*s+t)+"px,0,0)","transition-duration":"0s","-webkit-transition-duration":"0s"})};t.bind("touch.left",function(){e.goIndex("+1"),o=setInterval(function(){e.goIndex("+1")},2e3)}),t.bind("touch.right",function(){e.goIndex("-1"),o=setInterval(function(){e.goIndex("+1")},2e3)}),t.bind("touch.small",function(){e.goIndex("0"),o=setInterval(function(){e.goIndex("+1")},2e3)}),t.bind("touch.move",d),t.find(".bannerIndex").bind("change.index",r);var o=setInterval(function(){e.goIndex("+1")},2e3);n(window).resize(function(){s=n(window).width(),s>=320&&(e.cfg.viewX=s,i.find("li").width(s),i.width(s*a).css("left",0))})}}),i});