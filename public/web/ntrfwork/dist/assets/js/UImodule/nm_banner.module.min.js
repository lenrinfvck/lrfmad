define("nm_banner",["jquery","widgetUI","touch"],function(n,t){function i(){this.cfg={viewX:n(window).width(),index:0,dom:n("body"),list:[]}}return i.prototype=n.extend({},new t.Widget,{init:function(t){this.cfg=n.extend({},this.cfg,t),this.render()},renderUI:function(){var t=this.cfg.dom;console.log(t,this.cfg.list);var i=this.cfg.viewX,e=this.cfg.list,a=e.length,s='<ul class="bannerUl">',o='<ul class="bannerIndex">';for(var r in e)s+='<li style="background-image: url('+e[r]+')"></li>',o+="<li></li>";s+="</ul>",o+="</ul>",t.append(s).append(o),320>i&&(i=320),n(".bannerUl li").width(i),n(".bannerUl").width(i*a).css({transform:"translate3d(0px,0,0)","webkit-transform":"translate3d(0px,0,0)"}),n(".bannerIndex li").eq(0).addClass("active")},goIndex:function(n){var t=this.cfg.dom,i=this.cfg.viewX,e=t.find(".bannerUl"),a=this.cfg.index,s=this.cfg.list.length,o=function(n,t){e.css({transform:"translate3d(-"+n+"px,0,0)","webkit-transform":"translate3d(-"+n+"px,0,0)","transition-duration":t+"s","-webkit-transition-duration":t+"s"})};if("string"==typeof n)switch(n){case"+1":a-=1,a%=s,o(-i*a,.2),e.siblings("ul").trigger("change.index",-a);break;case"-1":a+=1,a>0&&(a=-s+1),o(-i*a,.2),e.siblings("ul").trigger("change.index",-a);break;case"0":o(-i*a,.2)}this.cfg.index=a},bindUI:function(){var t=this.cfg.dom,i=t.find(".bannerUl"),e=this,a=this.cfg.viewX,s=this.cfg.list.length;t.bindTouch();var o=function(n,i){t.find(".bannerIndex li").removeClass("active").eq(i).addClass("active")},r=function(n,t){var s=e.cfg.index;console.log(t),n.preventDefault(),clearInterval(d),i.css({transform:"translate3d("+(s*a+t)+"px,0,0)","-webkit-transform":"translate3d("+(s*a+t)+"px,0,0)","transition-duration":"0s","-webkit-transition-duration":"0s"})};t.bind("touchstart",function(n){n.stopPropagation()}),t.bind("touch.left",function(n){n.stopPropagation(),e.goIndex("+1"),d=setInterval(function(){e.goIndex("+1")},2e3)}),t.bind("touch.right",function(n){n.stopPropagation(),e.goIndex("-1"),d=setInterval(function(){e.goIndex("+1")},2e3)}),t.bind("touch.small",function(n){n.stopPropagation(),e.goIndex("0"),d=setInterval(function(){e.goIndex("+1")},2e3)}),t.bind("touch.move",r),t.find(".bannerIndex").bind("change.index",o);var d=setInterval(function(){e.goIndex("+1")},2e3);n(window).resize(function(){a=n(window).width(),a>=320&&(e.cfg.viewX=a,i.find("li").width(a),i.width(a*s).css("left",0))})}}),i});